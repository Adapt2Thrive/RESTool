(this.webpackJsonprestool=this.webpackJsonprestool||[]).push([[0],{32:function(e,t,a){e.exports=a(68)},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),l=a(2),i=a.n(l),u=a(4),s=a(15),d=a(13),m=a(8),p=a(10),f=a(11),v=a(18),h=a(16),b=a(19),y=new(function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,[{key:"extractDataByDataPath",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!t)return a?e[a]:e;var n=e,r=t.split("."),c=!0,o=!1,l=void 0;try{for(var i,u=r[Symbol.iterator]();!(c=(i=u.next()).done);c=!0){var s=i.value;if("undefined"===typeof n[s])return null;n=n[s]}}catch(d){o=!0,l=d}finally{try{c||null==u.return||u.return()}finally{if(o)throw l}}return n?a?n[a]:n:null}},{key:"checkIfFieldIsObject",value:function(e){return"object"===e.type||!("array"!==e.type||e.arrayType&&"object"!==e.arrayType)}}]),e}()),E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(p.a)(this,e),this.baseUrl=void 0,this.unauthorizedRedirectUrl=void 0,this.errorMessageDataPath=void 0,this.baseUrl=t||"",this.unauthorizedRedirectUrl=a||"",this.errorMessageDataPath=n||""}return Object(f.a)(e,[{key:"urlIsAbsolute",value:function(e){return 0===e.indexOf("http")||0===e.indexOf("https")}},{key:"replaceParamsInUrl",value:function(e,t){if(!t||"object"!==typeof t)return e;var a=e;return Object.keys(t).forEach((function(e){var n=":".concat(e);a=a.replace(n,t[e])})),a}},{key:"buildUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;if(!t||!t.length)return this.replaceParamsInUrl(e,a);var n=e,r=[],c=!0,o=!1,l=void 0;try{for(var i,u=t[Symbol.iterator]();!(c=(i=u.next()).done);c=!0){var s=i.value;if(s.name&&"undefined"!==typeof s.value)if(s.urlReplaceOnly){var d=":".concat(s.name);n=n.replace(d,s.value)}else r.push("".concat(s.name,"=").concat(s.value||""))}}catch(p){o=!0,l=p}finally{try{c||null==u.return||u.return()}finally{if(o)throw l}}if(r.length){var m=e.indexOf("?")>=0?"&":"?";return n+m+r.join("&")}return n}},{key:"buildRequest",value:function(e){var t=this.urlIsAbsolute(e.origUrl)?e.origUrl:this.baseUrl+e.origUrl;return{url:this.buildUrl(t,e.queryParams,e.rawData),params:{method:e.method||"get",headers:e.headers||{},body:"post"===e.method||"put"===e.method?e.body:void 0}}}},{key:"getErrorMessage",value:function(e){var t,a,n,r,c,o,l,u,s;return i.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return t="",d.prev=1,d.next=4,i.a.awrap(e.json());case 4:for(a=d.sent,n=!0,r=!1,c=void 0,d.prev=8,o=this.errorMessageDataPath[Symbol.iterator]();!(n=(l=o.next()).done);n=!0)u=l.value,(s=y.extractDataByDataPath(a,u))&&(t=s);d.next=16;break;case 12:d.prev=12,d.t0=d.catch(8),r=!0,c=d.t0;case 16:d.prev=16,d.prev=17,n||null==o.return||o.return();case 19:if(d.prev=19,!r){d.next=22;break}throw c;case 22:return d.finish(19);case 23:return d.finish(16);case 24:d.next=28;break;case 26:d.prev=26,d.t1=d.catch(1);case 28:return t="".concat(e.status," - ").concat(e.statusText||""),d.abrupt("return",t);case 30:case"end":return d.stop()}}),null,this,[[1,26],[8,12,16,24],[17,,19,23]])}},{key:"handleError",value:function(e){var t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(401!==e.status||!this.unauthorizedRedirectUrl){a.next=4;break}return t=this.unauthorizedRedirectUrl.replace(":returnUrl",encodeURIComponent(document.location.href)),document.location.href=t,a.abrupt("return");case 4:return a.t0=Error,a.next=7,i.a.awrap(this.getErrorMessage(e));case 7:throw a.t1=a.sent,new a.t0(a.t1);case 9:case"end":return a.stop()}}),null,this)}},{key:"makeRequest",value:function(e){var t,a,n,r=arguments;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:{},a=r.length>2&&void 0!==r[2]?r[2]:"json",c.next=4,i.a.awrap(fetch(e,Object.assign({},t,{})));case 4:if(!(n=c.sent).ok){c.next=17;break}c.t0=a,c.next="json"===c.t0?9:"text"===c.t0?12:"boolean"===c.t0?15:16;break;case 9:return c.next=11,i.a.awrap(n.json());case 11:return c.abrupt("return",c.sent);case 12:return c.next=14,i.a.awrap(n.text());case 14:return c.abrupt("return",c.sent);case 15:case 16:return c.abrupt("return",!0);case 17:return c.next=19,i.a.awrap(this.handleError(n));case 19:case"end":return c.stop()}}),null,this)}},{key:"fetch",value:function(e){var t,a,n,r,c,o,l,u,s,d;return i.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.method,a=e.origUrl,n=e.queryParams,r=e.rawData,c=e.body,o=e.headers,l=e.responseType,u=this.buildRequest({method:t,origUrl:a,queryParams:n,rawData:r,body:c,headers:o}),s=u.url,d=u.params,m.next=4,i.a.awrap(this.makeRequest(s,d,l));case 4:return m.abrupt("return",m.sent);case 5:case"end":return m.stop()}}),null,this)}}]),e}(),g=new E,w=new(function(e){function t(){return Object(p.a)(this,t),Object(v.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"getRemoteConfig",value:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(g.fetch({origUrl:e}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}},{key:"validateConfig",value:function(e){return{isValid:!0,errorMessage:null}}}]),t}(E)),k=a(14),x=a(29),j=a(22),O=r.a.createContext({config:null,activePage:null,error:null,setError:function(){},setActivePage:function(){},httpService:new E}),C=function(e){return function(t){return r.a.createElement(O.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}},N=(a(49),function(){return r.a.createElement("div",{className:"app-loader cp-spinner cp-balls small"})}),S=(a(50),function(e){return r.a.createElement("button",Object.assign({},e,{className:"button ".concat(e.className||""," ").concat(e.color||"")}),e.children)}),P=(a(51),function(e){var t=e.items,a=e.fields,n=e.callbacks,c=e.customActions;return r.a.createElement("div",{className:"table-wrapper"},r.a.createElement("table",{className:"pure-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,a.map((function(e){return r.a.createElement("th",{key:"th_".concat(e.name)},e.label||e.name)})),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:"tr_".concat(t)},a.map((function(a,n){var c=y.extractDataByDataPath(e,a.dataPath,a.name);return r.a.createElement("td",{key:"td_".concat(t,"_").concat(n)},function(e,t){if(t&&"object"===typeof t)return"object";switch(e){case"text":return r.a.createElement("span",null,t);case"boolean":return r.a.createElement("div",{className:"bool ".concat(t?"true":"false")});case"image":return r.a.createElement("img",{src:t,alt:t});case"url":return r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},t);case"colorbox":return r.a.createElement("div",{className:"colorbox",style:{backgroundColor:t}});default:return t}}(a.type,c))})),r.a.createElement("td",null,r.a.createElement("div",{className:"actions-wrapper"},n.put&&r.a.createElement(S,{onClick:function(){return n.put(e)},title:"Edit"},r.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),c&&c.length>0&&c.map((function(a,c){return r.a.createElement(S,{key:"action_".concat(t,"_").concat(c),onClick:function(){return n.action(e,a)},title:a.name},r.a.createElement("i",{className:"fa fa-".concat(a.icon||"cogs"),"aria-hidden":"true"}))})),n.delete&&r.a.createElement(S,{onClick:function(){return n.delete(e)},title:"Delete"},r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})))))})))))}),D=(a(52),function(e){var t=e.items,a=e.fields,n=e.callbacks,c=e.customActions;return r.a.createElement("div",{className:"cards-wrapper"},t.map((function(e,t){return r.a.createElement("div",{className:"card",key:"card_".concat(t)},a.map((function(a,n){var c=y.extractDataByDataPath(e,a.dataPath,a.name);return r.a.createElement("div",{className:"card-row ".concat(a.type),key:"card_".concat(t,"_").concat(n)},"image"!==a.type&&r.a.createElement("label",null,a.label||a.name,": "),function(e,t){if(t&&"object"===typeof t)return"object";switch(e){case"text":return r.a.createElement("span",null,t);case"boolean":return r.a.createElement("div",{className:"bool ".concat(t?"true":"false")});case"image":return r.a.createElement("img",{src:t,alt:t});case"url":return r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},t);case"colorbox":return r.a.createElement("div",{className:"colorbox",style:{backgroundColor:t}});default:return t}}(a.type,c))})),r.a.createElement("div",{className:"actions-wrapper"},n.put&&r.a.createElement(S,{onClick:function(){return n.put(e)},title:"Edit"},r.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),c&&c.length>0&&c.map((function(a,c){return r.a.createElement(S,{key:"action_".concat(t,"_").concat(c),onClick:function(){return n.action(e,a)},title:a.name},r.a.createElement("i",{className:"fa fa-".concat(a.icon||"cogs"),"aria-hidden":"true"}))})),n.delete&&r.a.createElement(S,{onClick:function(){return n.delete(e)},title:"Delete"},r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))))})))}),U=a(17),q=a(21),_=(a(53),C((function(e){var t=e.context,a=e.field,c=e.direction,o=e.showReset,l=e.onChange,s=Object(n.useState)({}),d=Object(u.a)(s,2),p=d[0],f=d[1],v=t.httpService;function h(e){var t=e.value||[];return r.a.createElement("div",{className:"array-form"},t.map((function(t,n){var c=b({value:t,name:"".concat(e.name,".").concat(n)},(function(t,a){var r=(e.value||[]).map((function(e,t){return t===n?a:e}));l(e.name,r)}));return r.a.createElement("div",{className:"array-form-item",key:"array_form_".concat(n)},c,r.a.createElement("i",{title:"Clear",onClick:function(){return function(e,t){var n=Object(U.a)(e.value||[]);n.splice(t,1),l(a.name,n)}(e,n)},"aria-label":"Remove",className:"clear-input fa fa-times"}))})),r.a.createElement(S,{className:"add-array-item",onClick:function(t){return function(e,t){e.preventDefault(),l(a.name,[].concat(Object(U.a)(t.value||[]),[""]))}(t,e)},title:"Add Item"},r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})))}function b(e,t){var a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{value:e.value,placeholder:e.placeholder||a,disabled:e.readonly,required:e.required,onChange:function(a){return t(e.name,a.target.value)}}};switch(e.type){case"boolean":return r.a.createElement("input",Object.assign({type:"checkbox"},a(),{checked:e.value,onChange:function(a){return t(e.name,a.target.checked,!0)}}));case"select":var n,c=e.optionSource;if(c&&!p[e.name])return function(e,t){var a,n,r,c,o,l;i.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,a=t.url,n=t.dataPath,r=t.actualMethod,a){u.next=4;break}throw new Error('URL option source (for field "'.concat(e,'") is empty.'));case 4:return u.next=6,i.a.awrap(v.fetch({method:r||"get",origUrl:a,queryParams:[],headers:{}}));case 6:if(c=u.sent,(o=y.extractDataByDataPath(c,n))&&o.length){u.next=10;break}throw new Error('Option source data is empty (for field "'.concat(e,'")'));case 10:l=o.map((function(e,a){var n=t.valuePath,r=t.displayPath;return"string"===typeof e?e:{display:r&&e[r]?e[r]:"Option ".concat(a+1),value:n&&e[n]?e[n]:"".concat(a)}})),f(Object(k.a)({},p,Object(q.a)({},e,l))),u.next=17;break;case 14:u.prev=14,u.t0=u.catch(0),m.b.error(u.t0.message);case 17:case"end":return u.stop()}}),null,null,[[0,14]])}(e.name,c),r.a.createElement("select",null,r.a.createElement("option",null,"-- Loading Options... --"));var o=null===(n=e.optionSource)||void 0===n?void 0:n.sortBy,l=p[e.name]||e.options||[],u=Object(j.a)(l,"string"===typeof o?[o]:o||[]);return r.a.createElement("select",a(),r.a.createElement("option",null,"-- Select --"),u.map((function(e,t){var a="option_".concat(t,"_");return"object"!==typeof e?r.a.createElement("option",{key:"".concat(a,"_").concat(e),value:e},e):r.a.createElement("option",{key:"".concat(a,"_").concat(e.value),value:e.value},e.display||e.value)})));case"object":return r.a.createElement("textarea",a("Enter JSON..."));case"array":var s=e.arrayType;return e.value&&s&&"object"!==s?h(e):r.a.createElement("textarea",a("Enter JSON array..."));case"long-text":return r.a.createElement("textarea",a("Enter text..."));case"number":case"integer":return r.a.createElement("input",Object.assign({type:"number"},a("0"),{onChange:function(a){return t(e.name,a.target.valueAsNumber)}}));case"color":return r.a.createElement("input",Object.assign({type:"color"},a("Enter color...")));case"email":return r.a.createElement("input",Object.assign({type:"email"},a("Enter email...")));case"password":return r.a.createElement("input",Object.assign({type:"password"},a("Enter password...")));case"hidden":return r.a.createElement("input",{type:"hidden",value:e.value});case"file":return r.a.createElement("input",{type:"file",accept:e.accept||"*",placeholder:e.placeholder||"Select file...",name:e.name||"file",disabled:e.readonly,required:e.required});case"note":return r.a.createElement("p",{className:"note"},e.value);case"text":default:return r.a.createElement("input",Object.assign({type:"text"},a("Enter text...")))}}return r.a.createElement("div",{className:"form-row ".concat(c||"row")},r.a.createElement("label",null,a.label||a.originalName,a.required?" *":""),b(a,l),o&&!a.readonly&&a.value&&a.value.length>0&&r.a.createElement("i",{title:"Clear",onClick:function(){return l(a.name,"",!0)},"aria-label":"Clear",className:"clear-input fa fa-times"}))}))),I=(a(56),function(e){var t=e.initialParams,a=e.submitCallback,c=Object(n.useState)(t),o=Object(u.a)(c,2),l=o[0],i=o[1];function s(e){e&&e.preventDefault(),a(l)}function d(e,t,a){var n=Object(U.a)(l).map((function(a){return a.name===e&&(a.value=t),a}));i(n),a&&s()}return Object(n.useEffect)((function(){i(t)}),[t]),l.length?r.a.createElement("section",{className:"query-params-form"},r.a.createElement("h5",null,"Query Params:"),r.a.createElement("form",{onSubmit:s},l.map((function(e,t){return r.a.createElement(_,{key:"query_param_".concat(t),field:e,onChange:d,showReset:!e.type||"text"===e.type})})),r.a.createElement(S,{type:"submit",onClick:s},"Submit"))):r.a.createElement(r.a.Fragment,null)}),A=(a(57),document.getElementById("popup-portal"));A||((A=document.createElement("div")).setAttribute("id","popup-portal"),document.body.append(A));var M=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(v.a)(this,Object(h.a)(t).call(this,e))).el=void 0,a.componentDidMount=function(){A.appendChild(a.el)},a.componentWillUnmount=function(){A.removeChild(a.el)},a.el=document.createElement("div"),a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.a.createPortal(this.props.children,this.el)}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r))))._handleKeyDown=function(e){var t=a.props,n=t.show,r=t.closeCallback;n&&27===e.keyCode&&r(e)},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=Object.assign({},{display:this.props.show?"block":"none"},this.props.style||{});return r.a.createElement(M,null,this.props.show?r.a.createElement("div",{className:"popup ".concat(this.props.className||""),style:t},r.a.createElement("div",{className:"overlay",onClick:function(t){return e.props.closeCallback(t)}}),r.a.createElement("div",{className:"popup-content",ref:this.props.refCallback},this.props.children,r.a.createElement("button",{title:"Close",className:"close-popup",onClick:function(t){return e.props.closeCallback(t)}},r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})))):null)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleKeyDown.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown.bind(this))}}]),t}(n.Component),T=new(function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,[{key:"isMultipartForm",value:function(e){for(var t in e){if("file"===e[t].type)return!0}return!1}}]),e}()),J=(a(58),a(27)),B=a(27).unflatten,F=C((function(e){var t=e.context,a=e.title,c=e.fields,o=e.rawData,l=e.getSingleConfig,s=e.submitCallback,d=e.closeCallback,p=JSON.parse(JSON.stringify(c)),f=t.httpService,v=Object(n.useState)(!0),h=Object(u.a)(v,2),b=h[0],E=h[1],g=Object(n.useState)([]),w=Object(u.a)(g,2),k=w[0],x=w[1];function j(e){var t,a,n,r,c;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),t={},a=new FormData,n=T.isMultipartForm(k),r=null,k.forEach((function(c){if("file"!==c.type){if(t[c.name]=c.value,n&&a.append(c.name,c.value),c.required&&!c.value&&(r="Please fill up all required fields."),y.checkIfFieldIsObject(c)&&c.value)try{t[c.name]=JSON.parse(c.value)}catch(e){r='Invalid JSON for field "'.concat(c.name,'".')}"encode"===c.type&&(t[c.name]=encodeURIComponent(c.value))}else{var o=document.querySelector('input[name="'.concat(c.name||"file",'"]'));if(o.files.length>0){var l=o.files[0];a.append(c.name||"file",l,l.name)}}})),!r){o.next=9;break}return m.b.error(r),o.abrupt("return");case 9:return E(!0),o.prev=10,c=n?a:B(t),o.next=14,i.a.awrap(s(c,n));case 14:m.b.success("Great Success!"),d(!0),o.next=21;break;case 18:o.prev=18,o.t0=o.catch(10),m.b.error(o.t0.message);case 21:E(!1);case 22:case"end":return o.stop()}}),null,null,[[10,18]])}function O(e,t){var a=JSON.parse(JSON.stringify(k));a=a.map((function(a){return a.name===e&&(a.value=t),a})),x(a)}return Object(n.useEffect)((function(){!function(){var e,t,a,n,r,c,u,s,d;i.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(e=o||{},!l||!l.url){v.next=15;break}return v.prev=2,t=l.url,a=l.requestHeaders,n=l.actualMethod,r=l.dataPath,c=l.queryParams,v.next=6,i.a.awrap(f.fetch({method:n||"get",origUrl:t,queryParams:c,headers:a,rawData:o}));case 6:u=v.sent,(s=y.extractDataByDataPath(u,r))&&"object"===typeof s&&(e=s),v.next=15;break;case 11:v.prev=11,v.t0=v.catch(2),console.error("Could not load single item's data.",v.t0),m.b.error("Could not load single item's data.");case 15:d=J(e||{}),x(p.map((function(t){var a=t.name;return t.originalName=t.name,t.dataPath&&(a="".concat(t.dataPath,".").concat(t.name)),t.name=a,y.checkIfFieldIsObject(t)?((e[a]||t.value)&&(t.value=JSON.stringify(e[a]||t.value,null,"  ")||""),t):"array"===t.type?(t.value=e[a]||t.value||[],t):(d[a]?t.value=d[a]:t.value=t.value||"",t)}))),E(!1);case 18:case"end":return v.stop()}}),null,null,[[2,11]])}()}),[]),r.a.createElement(R,{show:!0,className:"form-popup",closeCallback:function(){return d(!1)}},r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,a),r.a.createElement("section",null,b?r.a.createElement(N,null):r.a.createElement("form",{onSubmit:j},k.map((function(e,t){return r.a.createElement(_,{key:"field_".concat(t),field:e,onChange:O,showReset:!e.type||"text"===e.type})})),r.a.createElement("div",{className:"buttons-wrapper center"},r.a.createElement(S,{type:"submit",onClick:j,color:"green"},"Submit"))))))})),H=(a(60),C((function(e){var t,a=e.context,c=Object(d.h)().page,o=Object(d.g)(),l=o.push,s=o.location,p=a.activePage,f=a.error,v=a.setError,h=a.httpService,b=null===p||void 0===p?void 0:p.methods,E=(null===p||void 0===p?void 0:p.customActions)||[],g=null===b||void 0===b?void 0:b.getAll,w=null===b||void 0===b?void 0:b.getSingle,O=null===b||void 0===b?void 0:b.post,C=null===b||void 0===b?void 0:b.put,U=null===b||void 0===b?void 0:b.delete,q=Object(n.useState)(!1),_=Object(u.a)(q,2),A=_[0],M=_[1],R=Object(n.useState)(null),T=Object(u.a)(R,2),J=T[0],B=T[1],H=Object(n.useState)((null===g||void 0===g?void 0:g.queryParams)||[]),z=Object(u.a)(H,2),L=z[0],W=z[1],K=Object(n.useState)([]),G=Object(u.a)(K,2),V=G[0],Y=G[1];function Q(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:B({rawData:e,type:"update",title:"Update Item",config:C,getSingleConfig:w,submitCallback:function(t,a){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(ae(t,e,a));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))}});case 2:case"end":return t.stop()}}))}function $(e,t){var a={rawData:e,type:"action",title:t.name||"Custom Action",config:t,submitCallback:function(a,n){return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.awrap(X(a,e,t,n));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}))}};B(a)}function X(e,t,a,n){var r,c,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r=a.url,c=a.requestHeaders,o=a.actualMethod,l.next=3,i.a.awrap(h.fetch({method:o||"put",origUrl:r,rawData:t,body:n?e:JSON.stringify(e),headers:Object(k.a)({},c,{},n?{}:{"content-type":"application/json"}),responseType:"boolean"}));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}}))}function Z(){var e=x.parse(s.search);return((null===g||void 0===g?void 0:g.queryParams)||[]).map((function(t){return"undefined"!==typeof e[t.name]?t.value="boolean"===t.type?"true"===e[t.name]:decodeURIComponent(e[t.name]):t.value=t.value||"",t}))}function ee(){var e,t,a,n,r,c,o,l;return i.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(M(!0),v(null),u.prev=2,g){u.next=5;break}throw new Error("Get all method is not defined.");case 5:return e=g.url,t=g.requestHeaders,a=g.actualMethod,n=g.dataPath,r=g.sortBy,u.next=8,i.a.awrap(h.fetch({method:a||"get",origUrl:e,queryParams:Z(),headers:t}));case 8:if(c=u.sent,o=y.extractDataByDataPath(c,n)){u.next=12;break}throw new Error("Could not extract data from response.");case 12:if(Array.isArray(o)){u.next=14;break}throw new Error("Extracted data is invalid.");case 14:l=Object(j.a)(o,"string"===typeof r?[r]:r||[]),Y(l),u.next=21;break;case 18:u.prev=18,u.t0=u.catch(2),v(u.t0.message);case 21:M(!1);case 22:case"end":return u.stop()}}),null,null,[[2,18]])}function te(e,t){var a,n,r;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(O){c.next=2;break}throw new Error("Post method is not defined.");case 2:return a=O.url,n=O.requestHeaders,r=O.actualMethod,c.next=5,i.a.awrap(h.fetch({method:r||"post",origUrl:a,body:t?e:JSON.stringify(e),headers:Object(k.a)({},n,{},t?{}:{"content-type":"application/json"}),responseType:"boolean"}));case 5:return c.abrupt("return",c.sent);case 6:case"end":return c.stop()}}))}function ae(e,t,a){var n,r,c;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(C){o.next=2;break}throw new Error("Put method is not defined.");case 2:return n=C.url,r=C.requestHeaders,c=C.actualMethod,o.next=5,i.a.awrap(h.fetch({method:c||"put",origUrl:n,rawData:t,body:a?e:JSON.stringify(e),headers:Object(k.a)({},r,{},a?{}:{"content-type":"application/json"}),responseType:"boolean"}));case 5:return o.abrupt("return",o.sent);case 6:case"end":return o.stop()}}))}function ne(e){var t,a,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(window.confirm("Are you sure you want to delete this item?")){r.next=3;break}return r.abrupt("return");case 3:if(r.prev=3,U){r.next=6;break}throw new Error("Delete method is not defined.");case 6:return t=U.url,a=U.requestHeaders,n=U.actualMethod,r.next=9,i.a.awrap(h.fetch({method:n||"delete",origUrl:t,rawData:e,headers:a,responseType:"boolean"}));case 9:r.sent&&ee(),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(3),m.b.error(r.t0.message);case 16:case"end":return r.stop()}}),null,null,[[3,13]])}function re(e){if(W(e),!A){var t=L.map((function(e,t){return"".concat(0===t?"?":"").concat(e.name,"=").concat(encodeURIComponent(e.value||""))})).join("&");l(t)}}return Object(n.useEffect)((function(){var e,t,n=(null===a||void 0===a?void 0:null===(e=a.config)||void 0===e?void 0:null===(t=e.pages)||void 0===t?void 0:t.filter((function(e,t){return e.id===c||t+1===parseInt(c||"")}))[0])||null;a.setActivePage(n)}),[c]),Object(n.useEffect)((function(){W(Z())}),[p]),Object(n.useEffect)((function(){ee()}),[L]),r.a.createElement("div",{className:"app-page"},r.a.createElement("header",{className:"app-page-header"},r.a.createElement("hgroup",null,r.a.createElement("h2",null,null===p||void 0===p?void 0:p.name),(null===p||void 0===p?void 0:p.description)&&r.a.createElement("h4",null,null===p||void 0===p?void 0:p.description)),O&&r.a.createElement(S,{className:"add-item",color:"green",onClick:function(){return B({type:"add",title:"Add Item",config:O,submitCallback:te})}},"+ Add Item")),r.a.createElement("main",{className:"app-page-content"},r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{initialParams:L,submitCallback:re}),f?r.a.createElement("div",{className:"app-error"},f):function(){var e;if(A)return r.a.createElement(N,null);if(!V.length)return r.a.createElement("div",{className:"app-error"},"Nothing to see here. Result is empty.");var t=(null===g||void 0===g?void 0:g.fields)||(null===g||void 0===g?void 0:null===(e=g.display)||void 0===e?void 0:e.fields)||[];return"cards"===(null===g||void 0===g?void 0:g.display.type)?r.a.createElement(D,{callbacks:{delete:U?ne:function(){},put:C?Q:function(){},action:E.length?$:function(){}},fields:t,items:V,customActions:E}):r.a.createElement(P,{callbacks:{delete:U?ne:function(){},put:C?Q:function(){},action:E.length?$:function(){}},fields:t,items:V,customActions:E})}())),J&&r.a.createElement(F,{title:J.title,closeCallback:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];B(null),!0===e&&ee()},submitCallback:J.submitCallback,fields:(null===(t=J.config)||void 0===t?void 0:t.fields)||[],rawData:J.rawData,getSingleConfig:J.getSingleConfig}))}))),z=(a(64),C((function(e){var t=e.context.config,a=Object(n.useState)(!1),c=Object(u.a)(a,2),o=c[0],l=c[1];return r.a.createElement("nav",{className:"app-nav"},r.a.createElement(S,{className:"app-nav-opener",onClick:function(){return l(!o)}},o?r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-bars","aria-hidden":"true"})),r.a.createElement("div",{className:"app-nav-wrapper ".concat(o?"opened":"")},r.a.createElement("div",{className:"app-nav-links"},((null===t||void 0===t?void 0:t.pages)||[]).map((function(e,t){return r.a.createElement(s.b,{to:"/".concat(e.id||t+1),activeClassName:"active",key:"page_".concat(t),onClick:function(){return l(!1)}},e.name)})))))}))),L=(a(65),a(66),function(e){var t=e.styles.vars||{},a=[];for(var n in t)a.push("--".concat(n,": ").concat(t[n]));return r.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n      :root {\n        ".concat(a.join(";"),"\n      }\n    ")}})}),W=new E,K="RESTool App";function G(e){var t=document.createElement("link"),a=document.getElementById("favicon");t.id="favicon",t.rel="shortcut icon",t.href=e,a&&document.head.removeChild(a),document.head.appendChild(t)}var V=function(){var e,t,a,c=Object(n.useState)(!0),o=Object(u.a)(c,2),l=o[0],p=o[1],f=Object(n.useState)(null),v=Object(u.a)(f,2),h=v[0],b=v[1],y=Object(n.useState)((null===h||void 0===h?void 0:null===(e=h.pages)||void 0===e?void 0:e[0])||null),E=Object(u.a)(y,2),g=E[0],k=E[1],x=Object(n.useState)(null),j=Object(u.a)(x,2),C=j[0],N=j[1];Object(n.useEffect)((function(){!function e(t){var a;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(w.getRemoteConfig(t));case 3:if(a=n.sent,W.baseUrl=a.baseUrl||"",W.errorMessageDataPath=a.errorMessageDataPath||"",W.unauthorizedRedirectUrl=a.unauthorizedRedirectUrl||"",document.title=a.name||K,(null===a||void 0===a?void 0:a.favicon)&&G(a.favicon),!(null===h||void 0===h?void 0:h.remoteUrl)){n.next=13;break}return n.next=12,i.a.awrap(e(h.remoteUrl));case 12:return n.abrupt("return",n.sent);case 13:p(!1),b(a),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),console.error("Could not load config file",n.t0);case 20:case"end":return n.stop()}}),null,null,[[0,17]])}("./config.json")}),[]),Object(n.useEffect)((function(){var e=w.validateConfig(h),t=e.isValid,a=e.errorMessage;t||N(a)}),[h]);var S=(null===h||void 0===h?void 0:h.name)||K;return r.a.createElement("div",{className:"restool-app"},h?r.a.createElement(O.Provider,{value:{config:h,activePage:g,setActivePage:k,error:C,setError:N,httpService:W}},h.customStyles&&r.a.createElement(L,{styles:h.customStyles}),r.a.createElement(s.a,null,r.a.createElement("aside",null,r.a.createElement("h1",{title:S,onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=window.scrollY/2,a=0,n=performance.now();window.requestAnimationFrame((function r(c){(a+=Math.PI/(e/(c-n)))>=Math.PI&&window.scrollTo(0,0),0!==window.scrollY&&(window.scrollTo(0,Math.round(t+t*Math.cos(a))),n=c,window.requestAnimationFrame(r))}))}()}},S),r.a.createElement(z,null)),h&&r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/:page",component:H}),r.a.createElement(d.a,{path:"/",to:"/".concat((null===h||void 0===h?void 0:null===(t=h.pages)||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:a.id)||"1")})),r.a.createElement(m.a,{position:m.b.POSITION.TOP_CENTER,autoClose:4e3,draggable:!1}))):r.a.createElement("div",{className:"app-error"},l?"Loading Configuration...":"Could not find config file."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(67);o.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.6c4fdf80.chunk.js.map